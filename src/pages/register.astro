---
/**
 * Registration Page
 *
 * Provides the user interface for new user registration.
 * If a user with an active session visits this page, they will be redirected to the homepage.
 */
import { isFeatureEnabled } from "../features";

if (!isFeatureEnabled("auth")) {
  return Astro.redirect("/404");
}

import Layout from "../layouts/Layout.astro";
import { RegisterForm } from "../components/auth/RegisterForm";

// Redirect to homepage if user is already authenticated
// This is handled by middleware, but adding this as a double-check
const user = Astro.locals.user;
if (user) {
  return Astro.redirect("/");
}
---

<Layout title="Create Account - Reservo">
  <div class="container mx-auto px-4 py-16 flex items-center justify-center min-h-[calc(100vh-4rem)]">
    <RegisterForm client:load />
  </div>
</Layout>
